<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>I Like It!</title>
    <link rel="stylesheet" href="style/index_styles.css" media="screen" title="no title">
    <link rel="stylesheet" href="images/font-awesome/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
</head>
<body>

<div id="login" class="popup">
    <form class="popup-content animate">
        <div class="imgperfil">
                        <span onclick="document.getElementById('login').style.display='none'" class="close"
                              title="Cerrar">&times;
                        </span>
            <img src="images/unknown_user.jpg" alt="Avatar" class="avatar">
        </div>
        <div class="container">
            <label>Nombre de usuario</label>
            <input type="text" placeholder="Introduzca nombre de usuario" name="uname" required>
            <label>Contraseña</label>
            <input type="password" placeholder="Introduzca contraseña" name="psw"
                   required>
            <button type="submit" onclick="logIn(uname.value, psw.value)">Iniciar sesión</button>
            <input type="checkbox" checked="checked"> Recuérdame
        </div>
        <div class="container" style="background-color: #f1f1f1">
            <button type="button" onclick="document.getElementById('login').style.display='none'"
                    class="cancelbtn">
                Cancelar
            </button>
            <span class="psw"><a href="#">¿Olvidó su contraseña?</a></span>
        </div>
    </form>
</div>

<div class="titulo">
    <img id="logo" src="images/logo.png" alt="logo">
    <h1>I Like It!</h1>
</div>
<hr>
<div class="menu">
    <div class="user">
        <img id="user-logo" src="images/unknown_user.jpg" alt="user_logo">
        <a id="user-name" href="">Invitado</a>
    </div>
    <nav id="menu">
        <ul>
            <li><a onclick="document.getElementById('login').style.display='block'">Entra</a></li>
            <li><a href="register.html">Regístrate</a></li>
        </ul>
    </nav>
</div>
<hr>
<div class="grid">
    <div class="grid-row">
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/14369204_689472331219838_975364581_n.jpg" alt="pic1"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Almond Cookie</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/12070913_1629946617264714_746237316_n.jpg" alt="pic2"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Breakfast For Two</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell">
            <div class="photo">
                <a href=""><img src="images/12556145_1667886300117132_341009134_n.jpg" alt="pic3"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Chocolate Muffin</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
    </div>

    <div class="grid-row">
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/13561674_1584680545159259_1998300102_n.jpg" alt="pic4"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Fruit To Go</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/13712336_1603506346646327_2115627276_n.jpg" alt="pic5"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Layered Dessert</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell">
            <div class="photo">
                <a href=""><img src="images/13744079_133994890372410_370468037_n.jpg" alt="pic6"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Cuisine du soleil</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
    </div>

    <div class="grid-row">
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/14295568_342910602715634_790979400_n.jpg" alt="pic7"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Salad To Go</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/14334722_143569652763035_620291577_n.jpg" alt="pic8"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Fast Casual Lunch</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell">
            <div class="photo">
                <a href=""><img src="images/14350592_1746015235659379_1057064444514795520_n.jpg" alt="pic9"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Sun's out, eat out</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
    </div>
</div>
<footer class="footer">
    <div class="social">
        <ul class="footer-list">
            <li class="social-link">
                <a href="http://www.twitter.com"><i class="fa fa-twitter" aria-hidden="true"></i>Twitter</a>
            </li>
            <li class="social-link">
                <a href="http://www.facebook.com"><i class="fa fa-facebook-official" aria-hidden="true"></i>Facebook</a>
            </li>
            <li class="social-link">
                <a href="http://www.youtube.com"><i class="fa fa-youtube-play" aria-hidden="true"></i>YouTube</a>
            </li>
        </ul>
    </div>
</footer>
<div id="acceptCookies" style="display: block;">
    <div class="inner">
        Solicitamos su permiso para obtener datos estadísticos de su navegación en esta web, en cumplimiento del Real
        Decreto-ley 13/2012. Si continúa navegando consideramos que acepta el uso de cookies.
        <!--TODO El boton OK no hace nada-->
        <a href="javascript:void(0);" class="ok" onclick="ponerCookie();"><b>OK</b></a> |
        <a href="http://politicadecookies.com" target="_blank" class="info">Más información</a>
    </div>
</div>
<script>

    function logIn(uname, psw) {
        if(uname == readCookie("username") && psw == readCookie("password")) {
            //cambiar menú
            document.getElementById("user-logo").src="images/woman.png";
            document.getElementById('user-name').innerHTML = "<a id='user-name'>blonderwall</a>";
            document.getElementById('menu').innerHTML = "<ul><li style='width: 25%;'><a href=''>My Gallery</a></li><li><a href=''>Upload</a></li><li><a href=''>Explore</a></li><li style='width: 35%'><a href=''>Account Settings</a></li></ul>";
            document.getElementById("menu").firstElementChild.childNodes[0].style.width = "25%";
            document.getElementById("menu").firstElementChild.childNodes[1].style.width = "25%";
            document.getElementById("menu").firstElementChild.childNodes[2].style.width = "25%";
            document.getElementById("menu").firstElementChild.childNodes[3].style.width = "25%";
            document.getElementById("menu").style.width = "60%";
        } else {
            document.cookie="username=" + uname;
            document.cookie="password=" + psw;
        }
    }

    function readCookie(search) {
        var nameCo = search + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameCo) == 0) return c.substring(nameCo.length,c.length);
        }
        return null;
    }


    /*no funciona bien porque div login ocupa más de lo debido*/
    var login = document.getElementById('login');
    window.onclick = function (event) {
        if (event.target == login) {
            login.style.display = "none";
        }
    };

    var likes = document.getElementsByClassName('fa-heart');
    for (var i = 0; i < likes.length; i++) {
        likes[i].addEventListener('click', changeLikeColor, false);
    }
    function changeLikeColor() {
        if (this.style.color == 'red') {
            this.style.color = 'grey';
        } else {
            this.style.color = 'red';
        }
    }

    var shares = document.getElementsByClassName('fa-share-alt');
    for (i = 0; i < shares.length; i++) {
        shares[i].addEventListener('click', shareAlert, false);
    }

    function shareAlert() {
        alert('¡Ya se ha compartido la imagen!')
    }

    var comments = document.getElementsByClassName('fa-comment');
    for (i = 0; i < comments.length; i++) {
        comments[i].addEventListener('click', commentOn, false);
    }

    function commentOn() {
        var comment = this.parentNode.parentNode.firstElementChild;
        comment.style.display = 'inline';
        var textarea = comment.firstElementChild;
        textarea.focus();
    }

    var paperplanes = document.getElementsByClassName('fa-paper-plane');
    for (i = 0; i < paperplanes.length; i++) {
        paperplanes[i].addEventListener('click', commentOff, false);
    }

    //    TODO Falta hacer el signo menos para volver a contraer el texto?
    function commentOff() {
        var comment = this.parentNode.parentNode;
        var textarea = comment.firstElementChild;
        var commentBox = comment.parentNode.nextElementSibling;
        var p = commentBox.firstElementChild;
        comment.style.display = 'none';

        if (textarea.value != "") {
            commentBox.style.display = 'flex';
            if (textarea.value.length > 30) {
                p.innerHTML = textarea.value.substring(0, 30);
                var hiddenText = textarea.value.substr(30, textarea.value.length);
                p.insertAdjacentHTML('beforeend', '<i class="fa fa-plus" aria-hidden="true">');
                var pluses = document.getElementsByClassName('fa-plus');
                for (i = 0; i < pluses.length; i++) {
                    pluses[i].addEventListener('click', function () {
                        showMore(hiddenText, i, pluses);
                    }, false);
                }
            } else {
                p.innerHTML = textarea.value;
            }
        }
    }

    function showMore(mensaje, j, mases) {
        mases[j - 1].parentNode.insertAdjacentHTML('beforeend', mensaje);
        mases[j - 1].remove();
    }
</script>
</body>
</html>
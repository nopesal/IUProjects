<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>I Like It!</title>
    <link rel="stylesheet" href="style/index_styles.css" media="screen" title="no title">
    <link rel="stylesheet" href="images/font-awesome/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
</head>
<body>

<div id="login" class="popup">
    <form class="popup-content animate">
        <div class="imgperfil">
                        <span onclick="document.getElementById('login').style.display='none'" class="close"
                              title="Cerrar">&times;
                        </span>
            <img src="images/unknown_user.jpg" alt="Avatar" class="avatar">
        </div>
        <div class="container">
            <label>Nombre de usuario</label>
            <input type="text" placeholder="Introduzca nombre de usuario" name="uname" required>
            <label>Contraseña</label>
            <input type="password" placeholder="Introduzca contraseña" name="psw"
                   required>
            <button type="submit">Iniciar sesión</button>
            <input type="checkbox" checked="checked"> Recuérdame
        </div>
        <div class="container" style="background-color: #f1f1f1">
            <button type="button" onclick="document.getElementById('login').style.display='none'"
                    class="cancelbtn">
                Cancelar
            </button>
            <span class="psw"><a href="#">¿Olvidó su contraseña?</a></span>
        </div>
    </form>
</div>

<div class="titulo">
    <img id="logo" src="images/logo.png" alt="logo">
    <h1>I Like It!</h1>
</div>
<hr>
<div class="menu">
    <div class="user">
        <img id="user-logo" src="images/unknown_user.jpg" alt="user_logo">
        <a href="">Invitado</a>
    </div>
    <nav>
        <ul>
            <li><a onclick="document.getElementById('login').style.display='block'">Entra</a></li>
            <li><a href="register.html">Regístrate</a></li>
        </ul>
    </nav>
</div>
<hr>
<div class="grid">
    <div class="grid-row">
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/14369204_689472331219838_975364581_n.jpg" alt="pic1"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Almond Cookie</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/12070913_1629946617264714_746237316_n.jpg" alt="pic2"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Breakfast For Two</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell">
            <div class="photo">
                <a href=""><img src="images/12556145_1667886300117132_341009134_n.jpg" alt="pic3"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Chocolate Muffin</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
    </div>

    <div class="grid-row">
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/13561674_1584680545159259_1998300102_n.jpg" alt="pic4"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Fruit To Go</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/13712336_1603506346646327_2115627276_n.jpg" alt="pic5"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Layered Dessert</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell">
            <div class="photo">
                <a href=""><img src="images/13744079_133994890372410_370468037_n.jpg" alt="pic6"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Cuisine du soleil</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
    </div>

    <div class="grid-row">
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/14295568_342910602715634_790979400_n.jpg" alt="pic7"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Salad To Go</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell" style="margin-right: 5%">
            <div class="photo">
                <a href=""><img src="images/14334722_143569652763035_620291577_n.jpg" alt="pic8"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Fast Casual Lunch</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
        <div class="grid-cell">
            <div class="photo">
                <a href=""><img src="images/14350592_1746015235659379_1057064444514795520_n.jpg" alt="pic9"></a>
            </div>
            <div class="content">
                <div class="comment">
                    <textarea maxlength="100" placeholder="Escribe tu comentario..."></textarea>
                    <a><i class="fa fa-paper-plane" aria-hidden="true"></i></a>
                </div>
                <div class="pic-title">
                    <p>Sun's out, eat out</p>
                </div>
                <div class="social-list">
                    <i class="fa fa-heart" aria-hidden="true"></i>
                    <i class="fa fa-comment" aria-hidden="true"></i>
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                </div>
            </div>
            <div class="comment-box">
                <p></p>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
    <div class="social">
        <ul class="footer-list">
            <li class="social-link">
                <a href="http://www.twitter.com"><i class="fa fa-twitter" aria-hidden="true"></i>Twitter</a>
            </li>
            <li class="social-link">
                <a href="http://www.facebook.com"><i class="fa fa-facebook-official" aria-hidden="true"></i>Facebook</a>
            </li>
            <li class="social-link">
                <a href="http://www.youtube.com"><i class="fa fa-youtube-play" aria-hidden="true"></i>YouTube</a>
            </li>
        </ul>
    </div>
</footer>
<script>


    /*no funciona bien porque div login ocupa más de lo debido*/
    var login = document.getElementById('login');
    window.onclick = function (event) {
        if (event.target == login) {
            login.style.display = "none";
        }
    };

    var likes = document.getElementsByClassName('fa-heart');
    for (var i = 0; i < likes.length; i++) {
        likes[i].addEventListener('click', changeLikeColor, false);
    }
    function changeLikeColor() {
        if (this.style.color == 'red') {
            this.style.color = 'grey';
        } else {
            this.style.color = 'red';
        }
    }

    var shares = document.getElementsByClassName('fa-share-alt');
    for (i = 0; i < shares.length; i++) {
        shares[i].addEventListener('click', shareAlert, false);
    }

    function shareAlert() {
        alert('¡Ya se ha compartido la imagen!')
    }

    var comments = document.getElementsByClassName('fa-comment');
    for (i = 0; i < comments.length; i++) {
        comments[i].addEventListener('click', commentOn, false);
    }

    function commentOn() {
        var comment = this.parentNode.parentNode.firstElementChild;
        comment.style.display = 'inline';
        var textarea = comment.firstElementChild;
        textarea.focus();
    }

    var paperplanes = document.getElementsByClassName('fa-paper-plane');
    for (i = 0; i < paperplanes.length; i++) {
        paperplanes[i].addEventListener('click', commentOff, false);
    }

    //    TODO Falta hacer el signo menos para volver a contraer el texto?
    function commentOff() {
        var comment = this.parentNode.parentNode;
        var textarea = comment.firstElementChild;
        var commentBox = comment.parentNode.nextElementSibling;
        var p = commentBox.firstElementChild;
        comment.style.display = 'none';

        if (textarea.value != "") {
            commentBox.style.display = 'flex';
            if (textarea.value.length > 30) {
                p.innerHTML = textarea.value.substring(0, 30);
                var hiddenText = textarea.value.substr(30, textarea.value.length);
                p.insertAdjacentHTML('beforeend', '<i class="fa fa-plus" aria-hidden="true">');
                var pluses = document.getElementsByClassName('fa-plus');
                for (i = 0; i < pluses.length; i++) {
                    pluses[i].addEventListener('click', function () {
                        showMore(hiddenText, i, pluses);
                    }, false);
                }
            } else {
                p.innerHTML = textarea.value;
            }
        }
    }

    function showMore(mensaje, j, mases) {
        mases[j - 1].parentNode.insertAdjacentHTML('beforeend', mensaje);
        mases[j - 1].remove();
    }

    var gridCell = document.getElementsByClassName('grid-cell');
    for (i = 0; i < gridCell.length; i++) {
        gridCell[i].addEventListener('mouseover', showText, false);
        gridCell[i].addEventListener('mouseout', hideText, false);
    }

    function showText() {
        this.firstElementChild.children[1].style.display = 'block';
        this.firstElementChild.children[2].style.display = 'block';
    }

    function hideText() {
        this.firstElementChild.children[1].style.display = 'none';
        this.firstElementChild.children[2].style.display = 'none';
    }

</script>
</body>
</html>